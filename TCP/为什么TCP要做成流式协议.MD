# 为什么TCP要做成流式协议，而非包?

TCP（传输控制协议）被设计为一种流式协议，而不是包（packet）协议，这是因为TCP在互联网通信中扮演了不同的角色，并需要满足特定的通信需求。下面是为什么TCP采用流式协议的一些原因：


1. **可靠性**： TCP的主要任务之一是提供可靠的数据传输。为了实现这一目标，它将数据划分为一个个小的数据段，而不是简单地将它们分成数据包。每个数据段都会带有序号和确认信息，以便发送和接收方可以跟踪和管理数据的传输和接收。如果数据包在传输过程中丢失或损坏，TCP将负责重新传输丢失的数据，以确保所有数据都能够正确到达目的地，这是包协议通常不提供的。
2. **流量控制**： TCP还提供了流量控制的机制，以确保发送方不会向接收方发送过多的数据，从而防止网络拥塞。通过在数据段中包括窗口信息，接收方可以告诉发送方它还能够接收多少数据，以便发送方可以根据接收方的处理能力来调整发送速率。
3. **连接导向**： TCP是一种连接导向的协议，它在通信开始时会建立一个连接，然后在通信结束时关闭连接。这种连接状态允许TCP在通信双方之间建立信任和状态跟踪，以支持可靠的数据传输。
4. **顺序性**： TCP保持了数据的顺序性。这意味着如果发送方按照顺序发送数据，接收方将按照相同的顺序接收它们，从而保证了数据的一致性。
5. **面向字节流**： TCP被设计成面向字节流的协议，而不是面向消息的协议。这意味着数据可以被看作是连续的字节流，而不需要考虑消息的边界。这种特性对于某些应用程序非常有用，因为它们需要灵活地处理不同大小的数据块。

总之，TCP之所以被设计成流式协议，是因为它旨在提供可靠性、流量控制和连接导向等功能，这些功能对于许多互联网应用程序至关重要。尽管在某些情况下，UDP等包协议可能更适合特定需求，但TCP仍然是互联网上最常用的传输协议之一，因为它提供了广泛的功能和可靠性。

## TCP 流式协议

所谓流式协议，即协议的内容是像流水一样的字节流，内容与内容之间没有明确的分界标志，需要我们人为地去给这些协议划分边界。

> A 与 B 进行 TCP 通信，A 先后给 B 发送了一个 100 字节和 200 字节的数据包，那么 B 是如何收到呢？B 可能先收到 100 字节，再收到 200 字节；也可能先收到 50 字节，再收到 250 字节；或者先收到 100 字节，再收到 100 字节，再收到 100 字节；或者先收到 20 字节，再收到 20 字节，再收到 60 字节，再收到 100 字节，再收到 50 字节，再收到 50 字节......

规律 : A 一共给 B 发送了 300 字节，B 可能以一次或者多次任意形式的总数为 300 字节收到。假设 A 给 B 发送两个大小分别是 100 字节和 200 字节的数据包，作为发送方的 A 来说，A 是知道如何划分这两个数据包的界限的，但是对于 B 来说，如果不人为规定多少字节作为一个数据包，B 每次是不知道应该把收到的数据中多少字节作为一个有效的数据包的，而规定每次把多少数据当成一个包就是协议格式定义的内容之一。
